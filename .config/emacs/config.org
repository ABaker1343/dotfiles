#+TITLE:ABaker1343 emacs config
#+AUTHOR:ABaker1343
#+DESCRIPTION: emacs configuration
#+STARTUP: showeverything

* TABLE OF CONTENTS :toc:
- [[#theme][Theme]]
- [[#package-manager-setup][Package manager setup]]
- [[#evil-mode][Evil Mode]]
- [[#org-mode-configs][Org Mode Configs]]
- [[#projectile][Projectile]]
- [[#ivy][Ivy]]
- [[#lsp][LSP]]
- [[#tree-sitter][Tree Sitter]]
- [[#general-keybindings][General Keybindings]]
- [[#which-key][Which Key]]
- [[#gui-options][GUI options]]
- [[#other-general-settings][Other General Settings]]

* Theme
#+begin_src emacs-lisp
  (add-to-list 'custom-theme-load-path "~/.config/emacs/themes/")
  ;;(load-theme 'dracula t)
  ;;(load-theme 'spacegray t)
#+end_src

* Package manager setup

#+begin_src emacs-lisp
  (require 'package)
  (add-to-list 'package-archives
      '("melpa" . "https://melpa.org/packages/")
  )
  (package-initialize)
  ;;(package-refresh-contents)
#+end_src

* Evil Mode

#+begin_src emacs-lisp
  ;; download evil
  (unless (package-installed-p 'evil)
      (package-install 'evil)
  )
  (unless (package-installed-p 'evil-leader)
      (package-install 'evil-leader)
  )
  (require 'evil)
  (require 'evil-leader)

  ;; set configs
  (setq evil-shift-width 4)
  (setq evil-vsplit-window-right t)
  (setq evil-split-window-bottom nil)
  (setq evil-insert-state-cursor '(box))

  ;; start evil mode
  (evil-mode 1)
#+end_src

* Org Mode Configs
#+begin_src emacs-lisp
  ;; install toc-org
  (unless (package-installed-p 'toc-org)
      (package-install 'toc-org)
  )

  (require 'toc-org)
  (add-hook 'org-mode-hook 'toc-org-mode)
  (add-hook 'org-mode-hook 'org-indent-mode)

  ;; install org bullets
  (unless (package-installed-p 'org-bullets)
      (package-install 'org-bullets)
  )

  (require 'org-bullets)
  (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1)))
#+end_src

* Projectile
#+begin_src emacs-lisp
  ;; install projectile
  (unless (package-installed-p 'projectile)
      (package-install 'projectile)
  )

  (require 'projectile)
  (projectile-mode +1)

#+end_src

* Ivy
#+begin_src emacs-lisp
  ;; install ivy
  (unless (package-installed-p 'ivy)
      (package-install 'ivy)
  )

  (require 'ivy)
  (ivy-mode)
  (setq ivy-use-virtual-buffers t)
  (setq enable-recursive-minibuffers t)
#+end_src

* LSP
#+begin_src emacs-lisp
  (unless (package-installed-p 'lsp-mode)
      (package-install 'lsp-mode)
  )
  (unless (package-installed-p 'lsp-ui)
      (package-install 'lsp-ui)
  )
  (unless (package-installed-p 'lsp-treemacs)
      (package-install 'lsp-treemacs)
  )
  (unless (package-installed-p 'lsp-ivy)
      (package-install 'lsp-ivy)
  )
  (unless (package-installed-p 'flycheck)
      (package-install 'flycheck)
  )
  (unless (package-installed-p 'company) ;; completions
      (package-install 'company)
  )

  (require 'lsp-mode)
  (require 'lsp-ui)
  (require 'lsp-ivy)
  (require 'flycheck)
  (require 'company)

  (add-hook 'prog-mode-hook #'lsp)

#+end_src

* Tree Sitter
#+begin_src emacs-lisp
  (unless (package-installed-p 'tree-sitter)
      (package-install 'tree-sitter)
  )
  (unless (package-installed-p 'tree-sitter-langs)
      (package-install 'tree-sitter-langs)
  )

  (require 'tree-sitter)
  (require 'tree-sitter-langs)

  (tree-sitter-require 'c)
  (tree-sitter-require 'cpp)
  (tree-sitter-require 'lua)
  (tree-sitter-require 'python)
  (tree-sitter-require 'typescript)

  ;;(global-tree-sitter-mode)

  ;;(add-hook 'prog-mode-hook 'tree-sitter-hl-mode)
#+end_src


* General Keybindings

#+begin_src emacs-lisp
  ;; install general
  (unless (package-installed-p 'general)
      (package-install 'general)
  )

  (require 'general)
  (general-evil-setup)

  (defun tab-and-terminal ()
      (interactive)
      (evil-window-split)
      (shell)
  )

  (general-create-definer normal-leader-def
      :states '(normal emacs)
      :prefix "SPC" ;; Space
      :keymaps 'override
  )

  (normal-leader-def
      "f" '(:ignore t :wk "file commands")
      "f d" '(dired :wk "dired")
      "f f" '(find-file :wk "find file (project)")
      "f F" '(projectile-find-file :wk "find file (project)")
  )

  (normal-leader-def
      "c" '(:ignore t :wk "code commands")
      "c d" '(lsp-find-definition :wk "find definition")
      "c r" '(lsp-find-references :wk "find references")
      "c c" '(compile :wk "compile")
      "c C" '(projectile-compile-project :wk "compile (project)")
      "c s" '(lsp-ivy-workspace-symbol :wk "find symbol")
  )

  (normal-leader-def
      "w" '(:ignore t :wk "window commands")
      ;"w v" '(split-window-horizontally :wk "split window vertically")
      ;"w s" '(split-window-vertically :wk "split window horizontally")
      "w v" '(evil-window-vsplit :wk "split window vertically")
      "w s" '(evil-window-split :wk "split window horizontally")
      "w c" '(evil-window-delete :wk "close window")
      "w j" '(evil-window-down :wk "window down")
      "w k" '(evil-window-up :wk "window up")
      "w h" '(evil-window-left :wk "window left")
      "w l" '(evil-window-right :wk "window right")
      ;;"w t" '((lambda () ((interactive) (split-window-vertically) (shell))) :wk "shell in new tab")
      "w t" '(tab-and-terminal :wk "shell in new tab")
  )

  (normal-leader-def
      "t" '(:ignore t :wk "tab commands")
      "t l" '(tab-next :wk "next tab")
      "t h" '(tab-next :wk "previous tab")
      "t n" '(tab-new-to :wk "new tab")
      "t c" '(tab-close :wk "close tab")
  )

#+end_src

* Which Key

#+begin_src emacs-lisp
  (unless (package-installed-p 'which-key)
      (package-install 'which-key)
  )

  (require 'which-key)
  (which-key-mode 1)
#+end_src

* GUI options

#+begin_src emacs-lisp
  ;; remove window bars and headings
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (scroll-bar-mode -1)
  ;; relative line mode
  (setq display-line-numbers-type 'relative)
  (global-display-line-numbers-mode)
#+end_src

* Other General Settings

#+begin_src emacs-lisp
  (setq-default electric-indent-mode t)
  (setq-default indent-tabs-mode nil)
  (setq-default tab-always-indent t)
  (setq-default tab-width 4)
  ;;(setq c-basic-offset 4)

  (setq-default auto-save-default nil)
  (setq-default make-backup-files nil)

  (setq-default max-mini-window-height 0.3)

  (defun custom-c-hook ()
      (setq c-basic-offset 4)
      (c-set-offset 'substatement-open 0)
  )
  (add-hook 'c++-mode-hook 'custom-c-hook)
  (add-hook 'c-mode-hook 'custom-c-hook)
#+end_src
